# POKER-BRAIN: ì „ë¬¸ ì—ì´ì „íŠ¸ ì„¤ê³„

**ë¬¸ì„œ ë²„ì „**: 1.0
**ì‘ì„±ì¼**: 2025-11-17
**ëª©ì **: ê° ëª¨ë“ˆë³„ ì „ë¬¸ ì—ì´ì „íŠ¸ ë° PM/QA ì—ì´ì „íŠ¸ ì„¤ê³„

---

## ëª©ì°¨

1. [ê¸°ì¡´ ì—ì´ì „íŠ¸ ë¶„ì„](#1-ê¸°ì¡´-ì—ì´ì „íŠ¸-ë¶„ì„)
2. [ëª¨ë“ˆë³„ ì—ì´ì „íŠ¸ ë§¤í•‘](#2-ëª¨ë“ˆë³„-ì—ì´ì „íŠ¸-ë§¤í•‘)
3. [ì‹ ê·œ ì—ì´ì „íŠ¸ ì„¤ê³„](#3-ì‹ ê·œ-ì—ì´ì „íŠ¸-ì„¤ê³„)
4. [PM ì—ì´ì „íŠ¸ ê²€í†  ë° ê°œì„ ](#4-pm-ì—ì´ì „íŠ¸-ê²€í† -ë°-ê°œì„ )
5. [QA ì—ì´ì „íŠ¸ ê²€í†  ë° ê°œì„ ](#5-qa-ì—ì´ì „íŠ¸-ê²€í† -ë°-ê°œì„ )
6. [ì—ì´ì „íŠ¸ ìŠ¤í‚¬ ì •ì˜](#6-ì—ì´ì „íŠ¸-ìŠ¤í‚¬-ì •ì˜)
7. [ì—ì´ì „íŠ¸ í˜‘ì—… ì›Œí¬í”Œë¡œìš°](#7-ì—ì´ì „íŠ¸-í˜‘ì—…-ì›Œí¬í”Œë¡œìš°)

---

## 1. ê¸°ì¡´ ì—ì´ì „íŠ¸ ë¶„ì„

### 1.1 í˜„ì¬ ì‚¬ìš© ê°€ëŠ¥í•œ ì—ì´ì „íŠ¸ (33ê°œ)

#### Core Agents (15ê°œ)

| ì—ì´ì „íŠ¸ | ì „ë¬¸ ë¶„ì•¼ | í† í° | ëª¨ë¸ |
|---------|----------|------|------|
| context7-engineer | ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¬¸ì„œ ê²€ì¦ | 1200 | Sonnet |
| seq-engineer | ìˆœì°¨ì  ì‚¬ê³ , ìš”êµ¬ì‚¬í•­ ë¶„ì„ | 500 | Haiku |
| task-decomposition | íƒœìŠ¤í¬ ë¶„í•´ | 600 | Haiku |
| backend-architect | ë°±ì—”ë“œ ì•„í‚¤í…ì²˜, API ì„¤ê³„ | 1400 | Sonnet |
| frontend-developer | React/Vue/Svelte UI | 1300 | Sonnet |
| fullstack-developer | End-to-end ê°œë°œ | 1600 | Sonnet |
| typescript-expert | íƒ€ì… ì•ˆì „ì„± | 1000 | Sonnet |
| debugger | ì—ëŸ¬ ë””ë²„ê¹… | 1300 | Sonnet |
| test-automator | Unit/integration í…ŒìŠ¤íŠ¸ | 600 | Haiku |
| playwright-engineer | E2E í…ŒìŠ¤íŠ¸ | 1500 | Sonnet |
| code-reviewer | ì½”ë“œ í’ˆì§ˆ ë¦¬ë·° | 1300 | Sonnet |
| security-auditor | OWASP ì»´í”Œë¼ì´ì–¸ìŠ¤ | 1400 | Sonnet |
| performance-engineer | ì„±ëŠ¥ ìµœì í™” | 1300 | Sonnet |
| deployment-engineer | CI/CD, ë°°í¬ | 700 | Haiku |
| architect-reviewer | ì•„í‚¤í…ì²˜ ë¦¬ë·° | 1300 | Sonnet |

#### Extended Agents (18ê°œ)

| ì—ì´ì „íŠ¸ | ì „ë¬¸ ë¶„ì•¼ | í† í° | ëª¨ë¸ |
|---------|----------|------|------|
| data-engineer | ETL íŒŒì´í”„ë¼ì¸, ë°ì´í„° ë ˆì´í¬ | 1400 | Sonnet |
| data-scientist | SQL, BigQuery ë¶„ì„ | 1200 | Sonnet |
| ai-engineer | LLM/RAG ì‹œìŠ¤í…œ ì„¤ê³„ | 1500 | Sonnet |
| ml-engineer | ML íŒŒì´í”„ë¼ì¸, ëª¨ë¸ ë°°í¬ | 1400 | Sonnet |
| cloud-architect | AWS/GCP/Azure ì„¤ê³„ | 1500 | Sonnet |
| devops-troubleshooter | í”„ë¡œë•ì…˜ ë””ë²„ê¹… | 1400 | Sonnet |
| database-architect | DB ìŠ¤í‚¤ë§ˆ ì„¤ê³„ | 1300 | Sonnet |
| database-optimizer | ì¿¼ë¦¬ ìµœì í™” | 1200 | Sonnet |
| taskmanager-planner | íƒœìŠ¤í¬ ê³„íš, ë§ˆì¼ìŠ¤í†¤ | 700 | Haiku |
| github-engineer | Git ì›Œí¬í”Œë¡œìš° | 800 | Haiku |
| ... (ë‚˜ë¨¸ì§€ 8ê°œ) | | | |

---

### 1.2 í˜„ì¬ ì—ì´ì „íŠ¸ì˜ í•œê³„

**ë°œê²¬ëœ Gap**:

| í•„ìš” ì—­í•  | ê¸°ì¡´ ì—ì´ì „íŠ¸ | Gap |
|----------|-------------|-----|
| **ì˜ìƒ ì²˜ë¦¬** (M2, M5) | âŒ ì—†ìŒ | FFmpeg, íŠ¸ëœìŠ¤ì½”ë”©, ë©”íƒ€ë°ì´í„° ì¶”ì¶œ ì „ë¬¸ ì—ì´ì „íŠ¸ ë¶€ì¬ |
| **ê²€ì¦ ë¡œì§** (M3) | ai-engineer (ë¶€ë¶„ì ) | Vision API + íƒ€ì„ì½”ë“œ ë™ê¸°í™” ë¡œì§ ì „ë¬¸ì„± ë¶€ì¡± |
| **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ PM** | taskmanager-planner (ì¼ë°˜) | API ê³„ì•½ ê´€ë¦¬, ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ê´€ë¦¬ ì „ë¬¸ì„± ë¶€ì¡± |
| **í†µí•© QA** | test-automator (ìœ ë‹› í…ŒìŠ¤íŠ¸ë§Œ) | ëª¨ë“ˆ ê°„ í†µí•© í…ŒìŠ¤íŠ¸, E2E ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ë¶€ì¬ |

**ê²°ë¡ **: 4ê°œ ì‹ ê·œ ì—ì´ì „íŠ¸ ì„¤ê³„ í•„ìš”

---

## 2. ëª¨ë“ˆë³„ ì—ì´ì „íŠ¸ ë§¤í•‘

### 2.1 ì™„ì „ ë§¤í•‘ í…Œì´ë¸”

| ëª¨ë“ˆ | ë‹´ë‹¹ ì¸ê°„ | ê¸°ì¡´ ì—ì´ì „íŠ¸ | ì‹ ê·œ ì—ì´ì „íŠ¸ | ë³´ì¡° ì—ì´ì „íŠ¸ |
|------|----------|-------------|-------------|-------------|
| **M1: Data Ingestion** | Alice | âœ… data-engineer | - | database-architect, code-reviewer |
| **M2: Video Metadata** | Bob | âš ï¸ backend-architect (APIë§Œ) | â­ **video-processing-engineer** | debugger, test-automator |
| **M3: Timecode Validation** | Charlie | âš ï¸ ai-engineer (Visionë§Œ) | â­ **validation-engineer** | debugger, code-reviewer |
| **M4: RAG Search** | David | âœ… ai-engineer | - | performance-engineer, security-auditor |
| **M5: Clipping Service** | Eve | âš ï¸ devops-troubleshooter (ìš´ì˜ë§Œ) | â­ **video-pipeline-engineer** | deployment-engineer, debugger |
| **M6: Web UI** | Frank | âœ… frontend-developer | - | ui-ux-designer, security-auditor |
| **ì „ì²´ PM** | PM | âš ï¸ taskmanager-planner (ì¼ë°˜) | â­ **microservices-pm** | architect-reviewer |
| **ì „ì²´ QA** | QA | âš ï¸ test-automator (ìœ ë‹›ë§Œ) | â­ **integration-qa-orchestrator** | playwright-engineer, security-auditor |

**ë²”ë¡€**:
- âœ… ê¸°ì¡´ ì—ì´ì „íŠ¸ë¡œ ì¶©ë¶„
- âš ï¸ ê¸°ì¡´ ì—ì´ì „íŠ¸ë¡œ ë¶€ë¶„ ì»¤ë²„, ì‹ ê·œ í•„ìš”
- â­ ì‹ ê·œ ì—ì´ì „íŠ¸ í•„ìˆ˜

---

## 3. ì‹ ê·œ ì—ì´ì „íŠ¸ ì„¤ê³„

### 3.1 Video Processing Engineer

**ëª©ì **: M2 (Video Metadata Service) ì „ë‹´

```yaml
Agent ID: video-processing-engineer
Model: Sonnet (ë³µì¡í•œ FFmpeg ë¡œì§)
Tokens: ~1500

ì „ë¬¸ ë¶„ì•¼:
  - FFmpeg ëª…ë ¹ì–´ ìƒì„± ë° ìµœì í™”
  - ì˜ìƒ ë©”íƒ€ë°ì´í„° ì¶”ì¶œ (í•´ìƒë„, ì½”ë±, ë¹„íŠ¸ë ˆì´íŠ¸, ê¸¸ì´)
  - í”„ë¡ì‹œ ì˜ìƒ ìƒì„± (íŠ¸ëœìŠ¤ì½”ë”©)
  - NAS/GCS íŒŒì¼ ì‹œìŠ¤í…œ í†µí•©
  - ëŒ€ìš©ëŸ‰ ì˜ìƒ íŒŒì¼ ì²˜ë¦¬ ìµœì í™”

í•µì‹¬ ìŠ¤í‚¬:
  1. ffmpeg-mastery:
     - ë©”íƒ€ë°ì´í„° ì¶”ì¶œ: ffprobe JSON íŒŒì‹±
     - íŠ¸ëœìŠ¤ì½”ë”©: H.264/H.265, í•´ìƒë„ ë³€í™˜
     - ìµœì í™”: -c copy (ë¹ ë¥¸ ë³µì‚¬), CRF ì„¤ì •

  2. video-analysis:
     - ì˜ìƒ ê¸¸ì´ ì •í™•ë„ ê²€ì¦
     - ì½”ë± í˜¸í™˜ì„± ì²´í¬
     - íŒŒì¼ ì†ìƒ ê°ì§€

  3. storage-integration:
     - NAS SMB/NFS ë§ˆìš´íŠ¸ ì²˜ë¦¬
     - GCS ëŒ€ìš©ëŸ‰ ì—…ë¡œë“œ (ë©€í‹°íŒŒíŠ¸)
     - íŒŒì¼ ë¬´ê²°ì„± ê²€ì¦ (checksum)

  4. performance-optimization:
     - ë³‘ë ¬ ì²˜ë¦¬ (ë©€í‹° í”„ë¡œì„¸ì‹±)
     - ë©”ëª¨ë¦¬ ê´€ë¦¬ (ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬)
     - I/O ìµœì í™”

ì‚¬ìš© ë„êµ¬:
  - FFmpeg/FFprobe
  - Python: subprocess, multiprocessing
  - google-cloud-storage
  - PyFilesystem2 (NAS ì¶”ìƒí™”)

API ì„¤ê³„ ì§€ì›:
  - POST /v1/scan (NAS ìŠ¤ìº”)
  - POST /v1/generate-proxy (í”„ë¡ì‹œ ìƒì„±)
  - GET /v1/files/{file_id}/metadata

ì˜ˆì‹œ ì¶œë ¥:
  "NAS ì˜ìƒì„ 720p H.264 í”„ë¡ì‹œë¡œ ë³€í™˜í•˜ëŠ” ìµœì í™”ëœ FFmpeg ëª…ë ¹ì–´:

  ffmpeg -i /nas/wsop2024_d3.mp4 \
         -vf scale=1280:720 \
         -c:v libx264 -preset medium -crf 23 \
         -c:a aac -b:a 128k \
         -movflags +faststart \
         /tmp/proxy.mp4

  ì„¤ëª…:
  - scale=1280:720: 720pë¡œ ë‹¤ìš´ìŠ¤ì¼€ì¼
  - crf 23: ì‹œê°ì  í’ˆì§ˆ ìœ ì§€í•˜ë©´ì„œ ì••ì¶•
  - preset medium: ì†ë„ì™€ ì••ì¶•ë¥  ê· í˜•
  - movflags +faststart: ì›¹ ìŠ¤íŠ¸ë¦¬ë° ìµœì í™”

  ì˜ˆìƒ ì²˜ë¦¬ ì‹œê°„: 10ì‹œê°„ ì›ë³¸ â†’ ì•½ 30ë¶„ (8x ì†ë„)"

ì„±ê³µ ì§€í‘œ:
  - ë©”íƒ€ë°ì´í„° ì¶”ì¶œ ì •í™•ë„ 100%
  - í”„ë¡ì‹œ ìƒì„± ì‹¤íŒ¨ìœ¨ < 1%
  - ì²˜ë¦¬ ì†ë„: ì‹¤ì‹œê°„ì˜ 8-10ë°°
```

---

### 3.2 Validation Engineer

**ëª©ì **: M3 (Timecode Validation Service) ì „ë‹´

```yaml
Agent ID: validation-engineer
Model: Sonnet (ë³µì¡í•œ ê²€ì¦ ë¡œì§)
Tokens: ~1400

ì „ë¬¸ ë¶„ì•¼:
  - ë°ì´í„° í’ˆì§ˆ ê²€ì¦ (íƒ€ì„ì½”ë“œ ì •í™•ì„±)
  - Vision API í†µí•© (í¬ì»¤ ì¥ë©´ ê°ì§€)
  - Offset ìë™ ê³„ì‚° ì•Œê³ ë¦¬ì¦˜
  - í†µê³„ ê¸°ë°˜ ì‹ ë¢°ë„ ì ìˆ˜ ê³„ì‚°
  - ì˜ˆì™¸ ì¼€ì´ìŠ¤ ì²˜ë¦¬ (ìˆ˜ë™ ë§¤ì¹­ í•„ìš” íŒë‹¨)

í•µì‹¬ ìŠ¤í‚¬:
  1. timecode-validation:
     - ATI íƒ€ì„ìŠ¤íƒ¬í”„ vs ì˜ìƒ íƒ€ì„ì½”ë“œ ë¹„êµ
     - Offset íŒ¨í„´ ê°ì§€ (ì‹œê°„ëŒ€, DST, íŒŒì¼ ì‹œì‘ì )
     - ë™ê¸°í™” ì ìˆ˜ ê³„ì‚° (0-100)

  2. vision-api-integration:
     - Google Vision API Object Detection
     - í¬ì»¤ ê´€ë ¨ ê°ì²´ ì¸ì‹ (table, cards, chips, players)
     - Confidence threshold ì„¤ì •
     - ë¹„ìš© ìµœì í™” (ë°°ì¹˜ ì²˜ë¦¬)

  3. offset-calculation:
     - Â±30ì´ˆ ë²”ìœ„ ìƒ˜í”Œë§ (5ì´ˆ ê°„ê²©)
     - ìµœì  Offset ìë™ íƒìƒ‰
     - Confidence ê¸°ë°˜ ìë™/ìˆ˜ë™ íŒë‹¨

  4. statistical-analysis:
     - Sync Score = Vision(50%) + Duration(30%) + Players(20%)
     - ì´ìƒì¹˜ ê°ì§€ (ì˜ˆ: 10ì‹œê°„ í•¸ë“œ)
     - ê²€ì¦ ê²°ê³¼ í’ˆì§ˆ ë¦¬í¬íŠ¸

ì‚¬ìš© ë„êµ¬:
  - Google Cloud Vision API
  - FFmpeg (í”„ë ˆì„ ì¶”ì¶œ)
  - NumPy/Pandas (í†µê³„ ë¶„ì„)
  - BigQuery (ê²€ì¦ ê²°ê³¼ ì €ì¥)

API ì„¤ê³„ ì§€ì›:
  - POST /v1/validate (ë‹¨ì¼ ê²€ì¦)
  - POST /v1/validate/batch (ë°°ì¹˜ ê²€ì¦)
  - GET /v1/validate/{id}/result

ì˜ˆì‹œ ì¶œë ¥:
  "íƒ€ì„ì½”ë“œ ê²€ì¦ ì•Œê³ ë¦¬ì¦˜:

  def calculate_sync_score(hand, video_path) -> dict:
      # 1. í”„ë ˆì„ ì¶”ì¶œ
      frame = extract_frame_at_timecode(video_path, hand.timestamp_start)

      # 2. Vision API í˜¸ì¶œ
      result = vision_api.detect_objects(frame)
      poker_objects = ['table', 'playing_card', 'poker_chip', 'person']
      confidence = sum([o.score for o in result if o.name in poker_objects]) / len(poker_objects)

      # 3. ì ìˆ˜ ê³„ì‚°
      score = 0
      if confidence > 0.8:
          score += 50  # Vision confidence

      duration_diff = abs(expected_duration - actual_duration)
      if duration_diff < 5:
          score += 30  # Duration match

      if player_count_match:
          score += 20  # Player count

      # 4. Offset ê³„ì‚° (í•„ìš” ì‹œ)
      if score < 80:
          offset = find_best_offset(hand, video_path)
          return {
              'sync_score': score,
              'is_synced': False,
              'calculated_offset': offset
          }

      return {
          'sync_score': score,
          'is_synced': True,
          'calculated_offset': 0
      }

  ì„±ê³µ ê¸°ì¤€:
  - score > 90: ì™„ë²½ ë™ê¸°í™”
  - score 80-90: ì–‘í˜¸
  - score < 80: Offset ê³„ì‚° ë˜ëŠ” ìˆ˜ë™ ë§¤ì¹­"

ì„±ê³µ ì§€í‘œ:
  - ìë™ ë§¤ì¹­ ì„±ê³µë¥  > 95%
  - Vision API ì •í™•ë„ > 90%
  - Offset ê³„ì‚° ì„±ê³µë¥  > 70%
```

---

### 3.3 Video Pipeline Engineer

**ëª©ì **: M5 (Clipping Service) ì „ë‹´

```yaml
Agent ID: video-pipeline-engineer
Model: Sonnet (ë³µì¡í•œ íŒŒì´í”„ë¼ì¸)
Tokens: ~1500

ì „ë¬¸ ë¶„ì•¼:
  - ë¹„ë™ê¸° ë¹„ë””ì˜¤ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
  - Pub/Sub ê¸°ë°˜ ì´ë²¤íŠ¸ ì²˜ë¦¬
  - FFmpeg ì„œë¸Œí´ë¦½ ìƒì„± ìµœì í™”
  - Local Agent ì•„í‚¤í…ì²˜ (NAS ì„œë²„ ë°°í¬)
  - High Availability (HA) ì„¤ê³„

í•µì‹¬ ìŠ¤í‚¬:
  1. async-video-processing:
     - Pub/Sub Subscriber êµ¬í˜„
     - ë¹„ë™ê¸° í ì²˜ë¦¬ (Celery/RQ)
     - ë³‘ë ¬ í´ë¦¬í•‘ (ìµœëŒ€ 10ê°œ ë™ì‹œ)
     - Dead Letter Queue ì²˜ë¦¬

  2. ffmpeg-clipping:
     - ì •í™•í•œ íƒ€ì„ì½”ë“œ í´ë¦¬í•‘ (-ss, -to)
     - Copy ëª¨ë“œ (ë¹ ë¥¸ ì²˜ë¦¬)
     - Keyframe ì •ë ¬ (avoid_negative_ts)
     - í’ˆì§ˆ vs ì†ë„ ìµœì í™”

  3. local-agent-deployment:
     - Python Daemon (systemd)
     - NAS ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ ìµœì í™”
     - GCS ì—…ë¡œë“œ (ë©€í‹°íŒŒíŠ¸)
     - Health Check & Auto-restart

  4. high-availability:
     - Primary + Standby Agent
     - Heartbeat ëª¨ë‹ˆí„°ë§
     - Automatic Failover
     - ì‘ì—… ìƒíƒœ ì¶”ì  (BigQuery)

ì‚¬ìš© ë„êµ¬:
  - Pub/Sub (Publisher/Subscriber)
  - FFmpeg (ì„œë¸Œí´ë¦½ ìƒì„±)
  - systemd (Daemon ê´€ë¦¬)
  - GCS (ì—…ë¡œë“œ)
  - Redis (ì‘ì—… ìƒíƒœ ìºì‹œ)

íŒŒì´í”„ë¼ì¸ ì„¤ê³„:
  User Request
      â†“
  Pub/Sub Topic (clipping-requests)
      â†“
  Local Agent (Subscriber)
      â†“
  FFmpeg Clipping (NAS ë¡œì»¬)
      â†“
  GCS Upload
      â†“
  Pub/Sub Topic (clipping-complete)
      â†“
  User Notification

ì˜ˆì‹œ ì¶œë ¥:
  "Local Clipping Agent êµ¬í˜„:

  # src/clipping_agent.py
  class ClippingAgent:
      def __init__(self):
          self.subscriber = pubsub.SubscriberClient()
          self.primary = True  # Primary Agent

      def callback(self, message):
          data = json.loads(message.data)

          try:
              # 1. FFmpeg í´ë¦¬í•‘
              output = self.create_subclip(
                  nas_path=data['nas_path'],
                  start=data['start_seconds'],
                  end=data['end_seconds']
              )

              # 2. GCS ì—…ë¡œë“œ
              gcs_path = self.upload_to_gcs(output)

              # 3. Signed URL ìƒì„±
              url = self.generate_signed_url(gcs_path, expires_in=86400)

              # 4. ì™„ë£Œ ì•Œë¦¼
              self.publish_complete(data['request_id'], url)

              message.ack()

          except Exception as e:
              self.publish_failed(data['request_id'], str(e))
              message.nack()  # ì¬ì‹œë„

      def create_subclip(self, nas_path, start, end):
          output = f'/tmp/{uuid.uuid4()}.mp4'

          cmd = [
              'ffmpeg', '-ss', str(start), '-to', str(end),
              '-i', nas_path,
              '-c', 'copy',  # ë¹ ë¥¸ ë³µì‚¬
              '-avoid_negative_ts', 'make_zero',
              output
          ]

          subprocess.run(cmd, check=True)
          return output

  systemd ì„œë¹„ìŠ¤:

  # /etc/systemd/system/clipping-agent.service
  [Unit]
  Description=POKER-BRAIN Clipping Agent
  After=network.target

  [Service]
  Type=simple
  User=clipping
  WorkingDirectory=/opt/clipping-agent
  ExecStart=/usr/bin/python3 agent.py
  Restart=always
  RestartSec=10

  [Install]
  WantedBy=multi-user.target"

ì„±ê³µ ì§€í‘œ:
  - í´ë¦½ ìƒì„± ì„±ê³µë¥  > 99%
  - P95 ì²˜ë¦¬ ì‹œê°„ < 5ë¶„
  - HA Failover ì‹œê°„ < 1ë¶„
```

---

## 4. PM ì—ì´ì „íŠ¸ ê²€í†  ë° ê°œì„ 

### 4.1 ê¸°ì¡´ ì—ì´ì „íŠ¸ ë¶„ì„

#### taskmanager-planner (ê¸°ì¡´)

```yaml
í˜„ì¬ ì—­í• :
  - íƒœìŠ¤í¬ ê³„íš ë° ë§ˆì¼ìŠ¤í†¤ ìƒì„±
  - MCP (Model Context Protocol) í™œìš©
  - í”„ë¡œì íŠ¸ ë¶„í•´ ë° ì˜ì¡´ì„± ì •ì˜

ê°•ì :
  âœ… íƒœìŠ¤í¬ ë¶„í•´ ëŠ¥ë ¥ ìš°ìˆ˜
  âœ… íƒ€ì„ë¼ì¸ ê´€ë¦¬ ê°€ëŠ¥
  âœ… ì²´ê³„ì ì¸ ë§ˆì¼ìŠ¤í†¤ ì„¤ì •

ì•½ì :
  âŒ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ íŠ¹í™” ê¸°ëŠ¥ ë¶€ì¡±
  âŒ API ê³„ì•½ ê´€ë¦¬ ê²½í—˜ ì—†ìŒ
  âŒ ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ì‹œê°í™” ë¶€ì¡±
  âŒ OpenAPI ìŠ¤í™ ê²€í†  ëŠ¥ë ¥ ì—†ìŒ

ê²°ë¡ :
  âš ï¸ ì¼ë°˜ í”„ë¡œì íŠ¸ ê´€ë¦¬ëŠ” ê°€ëŠ¥í•˜ë‚˜,
  ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ëŠ” ë¶€ì¡±
```

---

### 4.2 ì‹ ê·œ ì—ì´ì „íŠ¸: Microservices PM

```yaml
Agent ID: microservices-pm
Model: Sonnet (ë³µì¡í•œ ì˜ì¡´ì„± ê´€ë¦¬)
Tokens: ~1600

ì „ë¬¸ ë¶„ì•¼:
  - ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ ê´€ë¦¬
  - API ê³„ì•½ (OpenAPI) ê´€ë¦¬ ë° ê²€ì¦
  - ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ë§¤í•‘ ë° ì‹œê°í™”
  - í†µí•© ì¼ì • ì¡°ìœ¨
  - ë¦¬ìŠ¤í¬ ê´€ë¦¬ (ì˜ì¡´ì„± ì²´ì¸ ë¶„ì„)

í•µì‹¬ ìŠ¤í‚¬:
  1. api-contract-management:
     - OpenAPI 3.0 ìŠ¤í™ ê²€í†  ë° ìŠ¹ì¸
     - Breaking Change ê°ì§€
     - API ë²„ì „ ê´€ë¦¬ (/v1, /v2)
     - Mock API ì„œë²„ êµ¬ì¶• ì§€ì›

  2. dependency-mapping:
     - ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ê·¸ë˜í”„ ìƒì„±
     - ìˆœí™˜ ì˜ì¡´ì„± ê°ì§€
     - Critical Path ë¶„ì„
     - ë³‘ë ¬ ê°œë°œ ê°€ëŠ¥ ëª¨ë“ˆ ì‹ë³„

  3. integration-scheduling:
     - í†µí•© íƒ€ì„ë¼ì¸ ê´€ë¦¬
     - Stub/Mock ì‚¬ìš© ì‹œì  ê²°ì •
     - E2E í…ŒìŠ¤íŠ¸ ì¼ì • ì¡°ìœ¨

  4. risk-management:
     - ì˜ì¡´ì„± ì²´ì¸ ë¦¬ìŠ¤í¬ ë¶„ì„
     - ë‹¨ì¼ ì¥ì• ì  (SPOF) ì‹ë³„
     - ì™„í™” ì „ëµ ì œì‹œ

ì‚¬ìš© ë„êµ¬:
  - OpenAPI Validator
  - Mermaid (ë‹¤ì´ì–´ê·¸ë¨)
  - taskmanager MCP
  - BigQuery (ì§„í–‰ ì¶”ì )

ì›Œí¬í”Œë¡œìš°:
  Week 1: API ê³„ì•½ ì„¤ê³„
    - ê° ëª¨ë“ˆì˜ OpenAPI ìŠ¤í™ ì‘ì„± ë…ì´‰
    - ìŠ¤í™ ë¦¬ë·° ë° í”¼ë“œë°±
    - ì˜ì¡´ì„± ê·¸ë˜í”„ ìƒì„±
    - Mock API ì„œë²„ êµ¬ì¶•

  Week 2: ë³‘ë ¬ ê°œë°œ ì‹œì‘
    - ë…ë¦½ ëª¨ë“ˆ (M1, M2) ìš°ì„  ì‹œì‘
    - ì˜ì¡´ ëª¨ë“ˆ (M3, M4) Mock ì‚¬ìš©
    - ì£¼ê°„ Sync-up ì£¼ìµœ

  Week 3-6: ì§„í–‰ ì¶”ì 
    - API ë³€ê²½ ì‚¬í•­ ëª¨ë‹ˆí„°ë§
    - Breaking Change ì•Œë¦¼
    - ë¸”ë¡œì»¤ í•´ê²° ì§€ì›

  Week 7: í†µí•© ì¤€ë¹„
    - ëª¨ë“  ëª¨ë“ˆ Staging ë°°í¬
    - E2E í…ŒìŠ¤íŠ¸ ì¡°ìœ¨
    - ë²„ê·¸ ìš°ì„ ìˆœìœ„ ê´€ë¦¬

ì˜ˆì‹œ ì¶œë ¥:
  "ëª¨ë“ˆ ì˜ì¡´ì„± ë¶„ì„ ê²°ê³¼:

  graph TD
      M1[M1: Data Ingestion] --> BQ[(BigQuery)]
      M2[M2: Video Metadata] --> BQ
      M3[M3: Validation] --> M1
      M3 --> M2
      M4[M4: RAG Search] --> M1
      M5[M5: Clipping] --> M2
      M6[M6: Web UI] --> M4
      M6 --> M5

  Critical Path:
  1. M1 (Data Ingestion) â†’ ê°€ì¥ ë¨¼ì € ì‹œì‘ í•„ìˆ˜
  2. M2 (Video Metadata) â†’ M1ê³¼ ë³‘ë ¬ ê°€ëŠ¥
  3. M3 (Validation) â†’ M1, M2 ì™„ë£Œ í›„ ì‹œì‘
  4. M4 (RAG Search) â†’ M1 ì™„ë£Œ í›„ ì‹œì‘ ê°€ëŠ¥
  5. M5, M6 â†’ ë‚˜ì¤‘ì— í†µí•©

  ë³‘ë ¬ ê°œë°œ ì „ëµ:
  - Week 3: M1 + M2 ë™ì‹œ ì‹œì‘ (ì˜ì¡´ì„± ì—†ìŒ)
  - Week 4: M4 ì‹œì‘ (M1 Mock ì‚¬ìš©)
  - Week 5: M3 ì‹œì‘ (M1, M2 Mock ì‚¬ìš©)
  - Week 6: M5, M6 ì‹œì‘

  ë¦¬ìŠ¤í¬:
  - M1 ì§€ì—° ì‹œ M3, M4 ë¸”ë¡œí‚¹ â†’ ì™„í™”: M1 ìš°ì„ ìˆœìœ„ ìµœìƒ
  - API Breaking Change â†’ ì™„í™”: ë²„ì „ ê´€ë¦¬ ê°•ì œ"

ì„±ê³µ ì§€í‘œ:
  - API ê³„ì•½ ì¤€ìˆ˜ìœ¨ 100%
  - í†µí•© ì¼ì • ì§€ì—° < 1ì£¼
  - Breaking Change ì‚¬ì „ ê°ì§€ > 90%
```

---

### 4.3 ê¸°ì¡´ vs ì‹ ê·œ ë¹„êµ

| í•­ëª© | taskmanager-planner (ê¸°ì¡´) | microservices-pm (ì‹ ê·œ) |
|------|---------------------------|------------------------|
| **íƒœìŠ¤í¬ ë¶„í•´** | âœ… ìš°ìˆ˜ | âœ… ìš°ìˆ˜ |
| **API ê³„ì•½ ê´€ë¦¬** | âŒ ì—†ìŒ | âœ… OpenAPI ê²€ì¦ |
| **ì˜ì¡´ì„± ë§¤í•‘** | âš ï¸ ê¸°ë³¸ | âœ… ê³ ê¸‰ (ê·¸ë˜í”„ ë¶„ì„) |
| **í†µí•© ì¡°ìœ¨** | âš ï¸ ì¼ë°˜ | âœ… ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ íŠ¹í™” |
| **ë¦¬ìŠ¤í¬ ê´€ë¦¬** | âš ï¸ ê¸°ë³¸ | âœ… ì˜ì¡´ì„± ì²´ì¸ ë¶„ì„ |
| **Mock API ì§€ì›** | âŒ ì—†ìŒ | âœ… êµ¬ì¶• ì§€ì› |

**ê¶Œì¥**: microservices-pm ì‹ ê·œ ë„ì…

---

## 5. QA ì—ì´ì „íŠ¸ ê²€í†  ë° ê°œì„ 

### 5.1 ê¸°ì¡´ ì—ì´ì „íŠ¸ ë¶„ì„

#### test-automator (ê¸°ì¡´)

```yaml
í˜„ì¬ ì—­í• :
  - ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‘ì„± (pytest, jest)
  - í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„± (ë‹¨ìˆœ)
  - í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë¶„ì„

ê°•ì :
  âœ… ìœ ë‹› í…ŒìŠ¤íŠ¸ ìƒì„± 100% ì„±ê³µë¥ 
  âœ… ë¹ ë¥¸ ì‹¤í–‰ (<5ì´ˆ)
  âœ… Mock ì‚¬ìš© ëŠ¥ë ¥

ì•½ì :
  âŒ E2E í…ŒìŠ¤íŠ¸ëŠ” playwright-engineer ë³„ë„ í•„ìš”
  âŒ ëª¨ë“ˆ ê°„ í†µí•© í…ŒìŠ¤íŠ¸ ë¶€ì¡±
  âŒ API ê³„ì•½ í…ŒìŠ¤íŠ¸ ì—†ìŒ
  âŒ í†µí•© í…ŒìŠ¤íŠ¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì—†ìŒ
```

#### playwright-engineer (ê¸°ì¡´)

```yaml
í˜„ì¬ ì—­í• :
  - E2E í…ŒìŠ¤íŠ¸ ì‘ì„± (Playwright)
  - ë¸Œë¼ìš°ì € ìë™í™”
  - UI í…ŒìŠ¤íŠ¸

ê°•ì :
  âœ… E2E í…ŒìŠ¤íŠ¸ ì „ë¬¸
  âœ… í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸

ì•½ì :
  âŒ UI ì¤‘ì‹¬ (ë°±ì—”ë“œ API í†µí•©ì€ ì•½í•¨)
  âŒ ëª¨ë“ˆ ê°„ ê³„ì•½ í…ŒìŠ¤íŠ¸ ì—†ìŒ
```

**ê²°ë¡ **: í†µí•© QA ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„° í•„ìš”

---

### 5.2 ì‹ ê·œ ì—ì´ì „íŠ¸: Integration QA Orchestrator

```yaml
Agent ID: integration-qa-orchestrator
Model: Sonnet (ë³µì¡í•œ í†µí•© ì‹œë‚˜ë¦¬ì˜¤)
Tokens: ~1700

ì „ë¬¸ ë¶„ì•¼:
  - ëª¨ë“ˆ ê°„ í†µí•© í…ŒìŠ¤íŠ¸ ì„¤ê³„ ë° ì‹¤í–‰
  - API ê³„ì•½ í…ŒìŠ¤íŠ¸ (Contract Testing)
  - E2E ì‹œë‚˜ë¦¬ì˜¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
  - í…ŒìŠ¤íŠ¸ í™˜ê²½ ê´€ë¦¬ (Staging)
  - ë²„ê·¸ íŠ¸ë¦¬ì•„ì§€ ë° ìš°ì„ ìˆœìœ„

í•µì‹¬ ìŠ¤í‚¬:
  1. contract-testing:
     - OpenAPI ìŠ¤í™ vs ì‹¤ì œ API ê²€ì¦
     - Pact/Spring Cloud Contract í™œìš©
     - Provider/Consumer í…ŒìŠ¤íŠ¸
     - Breaking Change ìë™ ê°ì§€

  2. integration-test-design:
     - ëª¨ë“ˆ ê°„ í†µì‹  ì‹œë‚˜ë¦¬ì˜¤ ì‘ì„±
     - Happy Path + Error Path
     - íƒ€ì„ì•„ì›ƒ, ì¬ì‹œë„ ë¡œì§ ê²€ì¦
     - ë°ì´í„° ì¼ê´€ì„± ê²€ì¦

  3. e2e-orchestration:
     - ì „ì²´ í”Œë¡œìš° ì‹œë‚˜ë¦¬ì˜¤:
       ê²€ìƒ‰ â†’ ë¯¸ë¦¬ë³´ê¸° â†’ ë‹¤ìš´ë¡œë“œ (M6â†’M4â†’M5)
     - ê° ë‹¨ê³„ ê²€ì¦ í¬ì¸íŠ¸ ì •ì˜
     - ì‹¤íŒ¨ ì‹œ ë¡¤ë°± ê²€ì¦

  4. test-environment-management:
     - Staging í™˜ê²½ êµ¬ì¶• (Docker Compose)
     - í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¤€ë¹„ (Fixture)
     - í™˜ê²½ ë¦¬ì…‹ (Clean Slate)

  5. bug-triage:
     - í†µí•© ë²„ê·¸ vs ëª¨ë“ˆ ë²„ê·¸ ë¶„ë¥˜
     - ì±…ì„ ëª¨ë“ˆ ì‹ë³„
     - ìš°ì„ ìˆœìœ„ íŒë‹¨ (P0-P3)

ì‚¬ìš© ë„êµ¬:
  - pytest + requests (API í†µí•© í…ŒìŠ¤íŠ¸)
  - Pact (Contract Testing)
  - Playwright (E2E)
  - Docker Compose (í™˜ê²½ êµ¬ì¶•)
  - BigQuery (í…ŒìŠ¤íŠ¸ ë°ì´í„°)

í…ŒìŠ¤íŠ¸ ê³„ì¸µ:
  L1: Unit Tests (ê° ëª¨ë“ˆ ë‚´ë¶€)
      â†’ test-automator ë‹´ë‹¹

  L2: Contract Tests (API ê³„ì•½)
      â†’ integration-qa-orchestrator ë‹´ë‹¹

  L3: Integration Tests (ëª¨ë“ˆ ê°„ í†µì‹ )
      â†’ integration-qa-orchestrator ë‹´ë‹¹

  L4: E2E Tests (ì „ì²´ í”Œë¡œìš°)
      â†’ integration-qa-orchestrator + playwright-engineer

ì˜ˆì‹œ ì¶œë ¥:
  "í†µí•© í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤: ê²€ìƒ‰ â†’ ë‹¤ìš´ë¡œë“œ

  # tests/integration/test_search_to_download.py
  import pytest
  import requests
  import time

  @pytest.mark.integration
  def test_full_workflow():
      '''ê²€ìƒ‰ë¶€í„° í´ë¦½ ë‹¤ìš´ë¡œë“œê¹Œì§€ ì „ì²´ í”Œë¡œìš°'''

      # Step 1: M4 (RAG Search) í˜¸ì¶œ
      search_response = requests.post(
          'http://rag-search-service:8080/v1/search',
          json={'query': 'Tom Dwan bluff'},
          headers={'Authorization': f'Bearer {get_test_token()}'}
      )
      assert search_response.status_code == 200
      results = search_response.json()
      assert len(results['results']) > 0

      hand_id = results['results'][0]['hand_id']

      # Step 2: M6 (Web UI) â†’ Pub/Sub í´ë¦¬í•‘ ìš”ì²­
      download_response = requests.post(
          'http://web-ui:3000/api/download',
          json={'hand_id': hand_id}
      )
      assert download_response.status_code == 200

      # Step 3: M5 (Clipping) ì™„ë£Œ ëŒ€ê¸°
      max_wait = 300  # 5ë¶„
      for _ in range(max_wait // 5):
          time.sleep(5)

          # Pub/Sub ì™„ë£Œ ë©”ì‹œì§€ í™•ì¸
          status = check_clipping_status(hand_id)
          if status == 'completed':
              break

      assert status == 'completed', 'í´ë¦½ ìƒì„± íƒ€ì„ì•„ì›ƒ'

      # Step 4: ë‹¤ìš´ë¡œë“œ URL ê²€ì¦
      download_url = get_download_url(hand_id)
      assert download_url.startswith('https://storage.googleapis.com/')

      # Step 5: íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë° ê²€ì¦
      file_response = requests.get(download_url)
      assert file_response.status_code == 200
      assert len(file_response.content) > 1024 * 1024  # > 1MB

      # Step 6: ì˜ìƒ ê¸¸ì´ ê²€ì¦ (ffprobe)
      temp_file = '/tmp/test_clip.mp4'
      with open(temp_file, 'wb') as f:
          f.write(file_response.content)

      duration = get_video_duration(temp_file)
      expected_duration = results['results'][0]['duration_seconds']
      assert abs(duration - expected_duration) < 2  # 2ì´ˆ ì˜¤ì°¨ í—ˆìš©

  ê²€ì¦ í¬ì¸íŠ¸:
  - M4 ê²€ìƒ‰ ì‘ë‹µ ì‹œê°„ < 10ì´ˆ
  - M5 í´ë¦½ ìƒì„± ì‹œê°„ < 5ë¶„
  - ìµœì¢… íŒŒì¼ í¬ê¸° ë° ê¸¸ì´ ì •í™•ì„±
  - ì—ëŸ¬ ë°œìƒ ì‹œ ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€

  Contract Test ì˜ˆì‹œ:

  # tests/contract/test_m4_api_contract.py
  def test_search_api_matches_openapi_spec():
      '''M4 Search APIê°€ OpenAPI ìŠ¤í™ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€'''

      # OpenAPI ìŠ¤í™ ë¡œë“œ
      spec = load_openapi_spec('modules/rag-search/openapi.yaml')

      # ì‹¤ì œ API í˜¸ì¶œ
      response = requests.post(
          'http://rag-search-service:8080/v1/search',
          json={'query': 'test', 'limit': 20}
      )

      # ìŠ¤í™ ê²€ì¦
      validate_response_against_spec(response, spec, '/v1/search', 'post')

      # í•„ìˆ˜ í•„ë“œ ì¡´ì¬ í™•ì¸
      assert 'results' in response.json()
      assert 'total_results' in response.json()
      assert 'processing_time_ms' in response.json()"

ì„±ê³µ ì§€í‘œ:
  - í†µí•© í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ > 80%
  - API ê³„ì•½ í…ŒìŠ¤íŠ¸ í†µê³¼ìœ¨ 100%
  - E2E ì„±ê³µë¥  > 95%
  - ë²„ê·¸ íŠ¸ë¦¬ì•„ì§€ ì •í™•ë„ > 90%
```

---

### 5.3 QA ì—ì´ì „íŠ¸ í˜‘ì—… êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Integration QA Orchestrator (ì´ê´„)     â”‚
â”‚  - í†µí•© í…ŒìŠ¤íŠ¸ ì„¤ê³„                      â”‚
â”‚  - API ê³„ì•½ ê²€ì¦                         â”‚
â”‚  - E2E ì‹œë‚˜ë¦¬ì˜¤ ê´€ë¦¬                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚test-automatorâ”‚  â”‚playwright-engineerâ”‚
â”‚(ìœ ë‹› í…ŒìŠ¤íŠ¸)  â”‚  â”‚(E2E í…ŒìŠ¤íŠ¸)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚code-reviewer â”‚  â”‚security-auditor  â”‚
â”‚(ì½”ë“œ ë¦¬ë·°)    â”‚  â”‚(ë³´ì•ˆ ê²€ì¦)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì—­í•  ë¶„ë‹´**:
- **Integration QA**: ì „ëµ ìˆ˜ë¦½, í†µí•© í…ŒìŠ¤íŠ¸, ê³„ì•½ í…ŒìŠ¤íŠ¸
- **test-automator**: ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‘ì„± ì§€ì›
- **playwright-engineer**: E2E ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- **code-reviewer**: í…ŒìŠ¤íŠ¸ ì½”ë“œ í’ˆì§ˆ ê²€í† 
- **security-auditor**: ë³´ì•ˆ ì·¨ì•½ì  ê²€ì¦

---

## 6. ì—ì´ì „íŠ¸ ìŠ¤í‚¬ ì •ì˜

### 6.1 ê³µí†µ ìŠ¤í‚¬ (ëª¨ë“  ì—ì´ì „íŠ¸)

```yaml
ê¸°ë³¸ ë„êµ¬:
  - Read: íŒŒì¼ ì½ê¸°
  - Write: íŒŒì¼ ì“°ê¸°
  - Edit: íŒŒì¼ ìˆ˜ì •
  - Bash: ëª…ë ¹ì–´ ì‹¤í–‰
  - Grep: ì½”ë“œ ê²€ìƒ‰

ì½”ë“œ í’ˆì§ˆ:
  - 1:1 í…ŒìŠ¤íŠ¸ í˜ì–´ë§ ì¤€ìˆ˜
  - OpenAPI ìŠ¤í™ ì‘ì„±
  - ì—ëŸ¬ ì²˜ë¦¬ í‘œì¤€í™”
  - ë¡œê¹… í‘œì¤€ ì¤€ìˆ˜
```

### 6.2 ëª¨ë“ˆë³„ ì „ë¬¸ ìŠ¤í‚¬

#### M1: data-engineer

```yaml
ì „ë¬¸ ë„êµ¬:
  - Apache Beam SDK
  - BigQuery Python Client
  - Dataflow API

í•µì‹¬ íŒ¨í„´:
  - ETL íŒŒì´í”„ë¼ì¸ ì„¤ê³„
  - ë°ì´í„° í’ˆì§ˆ ê²€ì¦
  - ìŠ¤í‚¤ë§ˆ ì§„í™” (Schema Evolution)
  - íŒŒí‹°ì…”ë‹ ìµœì í™”
```

#### M2: video-processing-engineer

```yaml
ì „ë¬¸ ë„êµ¬:
  - FFmpeg/FFprobe
  - PyAV (Python Video Library)
  - google-cloud-storage
  - PyFilesystem2

í•µì‹¬ íŒ¨í„´:
  - ë¹„ë””ì˜¤ ë©”íƒ€ë°ì´í„° ì¶”ì¶œ
  - íŠ¸ëœìŠ¤ì½”ë”© ìµœì í™”
  - ëŒ€ìš©ëŸ‰ íŒŒì¼ ìŠ¤íŠ¸ë¦¬ë°
  - ë³‘ë ¬ ì²˜ë¦¬ (multiprocessing)
```

#### M3: validation-engineer

```yaml
ì „ë¬¸ ë„êµ¬:
  - Google Cloud Vision API
  - NumPy/Pandas (í†µê³„)
  - Matplotlib (ì‹œê°í™”)
  - FFmpeg (í”„ë ˆì„ ì¶”ì¶œ)

í•µì‹¬ íŒ¨í„´:
  - Vision API ë°°ì¹˜ ì²˜ë¦¬
  - í†µê³„ ê¸°ë°˜ ì‹ ë¢°ë„ ê³„ì‚°
  - Offset íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜
  - ì˜ˆì™¸ ì¼€ì´ìŠ¤ ë¶„ë¥˜
```

#### M4: ai-engineer

```yaml
ì „ë¬¸ ë„êµ¬:
  - Vertex AI SDK
  - TextEmbedding API
  - Vector Search
  - BigQuery ML

í•µì‹¬ íŒ¨í„´:
  - RAG íŒŒì´í”„ë¼ì¸ ì„¤ê³„
  - Embedding ìµœì í™”
  - Re-ranking ì•Œê³ ë¦¬ì¦˜
  - ê²€ìƒ‰ í’ˆì§ˆ ì¸¡ì •
```

#### M5: video-pipeline-engineer

```yaml
ì „ë¬¸ ë„êµ¬:
  - Pub/Sub SDK
  - FFmpeg (í´ë¦¬í•‘)
  - systemd (Daemon)
  - Redis (ìºì‹±)

í•µì‹¬ íŒ¨í„´:
  - ë¹„ë™ê¸° í ì²˜ë¦¬
  - HA (High Availability) ì„¤ê³„
  - ë°±í”„ë ˆì…” ê´€ë¦¬
  - Dead Letter Queue
```

#### M6: frontend-developer

```yaml
ì „ë¬¸ ë„êµ¬:
  - Next.js 14
  - React Query
  - shadcn/ui
  - Tailwind CSS

í•µì‹¬ íŒ¨í„´:
  - Server Components
  - API Routes (BFF)
  - Optimistic Updates
  - ë¬´í•œ ìŠ¤í¬ë¡¤ (Infinite Scroll)
```

---

## 7. ì—ì´ì „íŠ¸ í˜‘ì—… ì›Œí¬í”Œë¡œìš°

### 7.1 Phase 0: API ì„¤ê³„ ë‹¨ê³„

```yaml
Week 1: API ê³„ì•½ ì„¤ê³„

ì°¸ì—¬ ì—ì´ì „íŠ¸:
  - microservices-pm (ì£¼ë„)
  - ê° ëª¨ë“ˆ ë‹´ë‹¹ ì—ì´ì „íŠ¸ (6ê°œ)
  - architect-reviewer (ê²€í† )

ì›Œí¬í”Œë¡œìš°:
  1. microservices-pm:
     - ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ë¶„ì„
     - API ì„¤ê³„ ê°€ì´ë“œë¼ì¸ ë°°í¬
     - OpenAPI í…œí”Œë¦¿ ì œê³µ

  2. ê° ëª¨ë“ˆ ì—ì´ì „íŠ¸:
     - ë‹´ë‹¹ ëª¨ë“ˆì˜ OpenAPI ìŠ¤í™ ì‘ì„±
     - ì˜ˆì‹œ Request/Response ì‘ì„±
     - ì—ëŸ¬ ì½”ë“œ ì •ì˜

  3. architect-reviewer:
     - ì „ì²´ API ì•„í‚¤í…ì²˜ ê²€í† 
     - RESTful ì›ì¹™ ì¤€ìˆ˜ í™•ì¸
     - ì¼ê´€ì„± ê²€ì¦

  4. microservices-pm:
     - í”¼ë“œë°± í†µí•©
     - Mock API ì„œë²„ êµ¬ì¶•
     - API ê³„ì•½ ìŠ¹ì¸

ì‚°ì¶œë¬¼:
  - 6ê°œ OpenAPI YAML íŒŒì¼
  - Mock API ì„œë²„ (Postman/Prism)
  - API ê³„ì•½ ë¬¸ì„œ
```

### 7.2 Phase 1: ë³‘ë ¬ ê°œë°œ ë‹¨ê³„

```yaml
Week 3-6: ë…ë¦½ ê°œë°œ

ëª¨ë“ˆë³„ ì›Œí¬í”Œë¡œìš°:

M1 (data-engineer):
  1. BigQuery ìŠ¤í‚¤ë§ˆ ìƒì„±
  2. Dataflow íŒŒì´í”„ë¼ì¸ êµ¬í˜„
  3. test-automator: ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‘ì„±
  4. code-reviewer: ì½”ë“œ ë¦¬ë·°
  5. deployment-engineer: Cloud Run ë°°í¬

M2 (video-processing-engineer):
  1. FFmpeg ë©”íƒ€ë°ì´í„° ì¶”ì¶œ êµ¬í˜„
  2. í”„ë¡ì‹œ ìƒì„± ë¡œì§
  3. test-automator: ìœ ë‹› í…ŒìŠ¤íŠ¸
  4. performance-engineer: ì„±ëŠ¥ ìµœì í™”
  5. deployment-engineer: ë°°í¬

... (ë‚˜ë¨¸ì§€ ëª¨ë“ˆ ë™ì¼)

ì£¼ê°„ Sync-up (microservices-pm ì£¼ìµœ):
  - ì§„í–‰ ìƒí™© ê³µìœ 
  - API ë³€ê²½ ì‚¬í•­ ê³µì§€
  - ë¸”ë¡œì»¤ í•´ê²°
  - ì˜ì¡´ì„± ì¡°ìœ¨
```

### 7.3 Phase 2: í†µí•© í…ŒìŠ¤íŠ¸ ë‹¨ê³„

```yaml
Week 7-8: í†µí•© ë° í…ŒìŠ¤íŠ¸

ì°¸ì—¬ ì—ì´ì „íŠ¸:
  - integration-qa-orchestrator (ì£¼ë„)
  - test-automator (ìœ ë‹› í…ŒìŠ¤íŠ¸)
  - playwright-engineer (E2E)
  - security-auditor (ë³´ì•ˆ)
  - all module agents (ë²„ê·¸ ìˆ˜ì •)

ì›Œí¬í”Œë¡œìš°:
  1. integration-qa-orchestrator:
     - í†µí•© í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì‘ì„±
     - Contract Test ì‹¤í–‰
     - E2E í…ŒìŠ¤íŠ¸ ê³„íš

  2. Staging ë°°í¬:
     - deployment-engineer: ëª¨ë“  ëª¨ë“ˆ ë°°í¬
     - Docker Compose í™˜ê²½ êµ¬ì¶•

  3. í…ŒìŠ¤íŠ¸ ì‹¤í–‰:
     - L2: Contract Tests
     - L3: Integration Tests
     - L4: E2E Tests (playwright-engineer)

  4. ë²„ê·¸ ìˆ˜ì •:
     - integration-qa-orchestrator: íŠ¸ë¦¬ì•„ì§€
     - ê° ëª¨ë“ˆ ì—ì´ì „íŠ¸: ë²„ê·¸ ìˆ˜ì •
     - code-reviewer: ìˆ˜ì • ì½”ë“œ ë¦¬ë·°

  5. íšŒê·€ í…ŒìŠ¤íŠ¸:
     - ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¬ì‹¤í–‰
     - ì„±ê³µë¥  > 95% ë‹¬ì„± ì‹œ Production ìŠ¹ì¸

ì‚°ì¶œë¬¼:
  - í†µí•© í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸
  - ë²„ê·¸ ëª©ë¡ ë° ìˆ˜ì • ë‚´ì—­
  - Production ë°°í¬ ìŠ¹ì¸ ë¬¸ì„œ
```

---

## 8. ì—ì´ì „íŠ¸ ì„±ëŠ¥ ì§€í‘œ

### 8.1 ëª¨ë“ˆ ì—ì´ì „íŠ¸ KPI

| ì—ì´ì „íŠ¸ | ì„±ê³µ ì§€í‘œ | ëª©í‘œ |
|---------|----------|------|
| **data-engineer** | ETL ì„±ê³µë¥  | > 99% |
| **video-processing-engineer** | í”„ë¡ì‹œ ìƒì„± ì„±ê³µë¥  | > 99% |
| **validation-engineer** | ìë™ ë§¤ì¹­ ì„±ê³µë¥  | > 95% |
| **ai-engineer** | ê²€ìƒ‰ ì •í™•ë„ (Precision@5) | > 80% |
| **video-pipeline-engineer** | í´ë¦½ ìƒì„± ì„±ê³µë¥  | > 99% |
| **frontend-developer** | UI ë°˜ì‘ ì‹œê°„ | < 100ms |

### 8.2 PM/QA ì—ì´ì „íŠ¸ KPI

| ì—ì´ì „íŠ¸ | ì„±ê³µ ì§€í‘œ | ëª©í‘œ |
|---------|----------|------|
| **microservices-pm** | API ê³„ì•½ ì¤€ìˆ˜ìœ¨ | 100% |
| **microservices-pm** | ì¼ì • ì§€ì—° | < 1ì£¼ |
| **integration-qa-orchestrator** | í†µí•© í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ | > 80% |
| **integration-qa-orchestrator** | ë²„ê·¸ íŠ¸ë¦¬ì•„ì§€ ì •í™•ë„ | > 90% |

---

## 9. ì—ì´ì „íŠ¸ ë¹„ìš© ë¶„ì„

### 9.1 í† í° ì‚¬ìš©ëŸ‰ (Phase 1, 6ì£¼)

```yaml
ëª¨ë“ˆ ì—ì´ì „íŠ¸ (ê° 4ì£¼ í™œë™):
  - data-engineer: 1400 tokens Ã— 100íšŒ = 140K
  - video-processing-engineer: 1500 Ã— 150 = 225K
  - validation-engineer: 1400 Ã— 200 = 280K
  - ai-engineer: 1500 Ã— 100 = 150K
  - video-pipeline-engineer: 1500 Ã— 120 = 180K
  - frontend-developer: 1300 Ã— 100 = 130K
  ì†Œê³„: 1,105K tokens

PM ì—ì´ì „íŠ¸ (6ì£¼ í™œë™):
  - microservices-pm: 1600 Ã— 50 = 80K

QA ì—ì´ì „íŠ¸ (Week 7-8):
  - integration-qa-orchestrator: 1700 Ã— 100 = 170K
  - test-automator: 600 Ã— 200 = 120K
  - playwright-engineer: 1500 Ã— 50 = 75K
  ì†Œê³„: 365K tokens

ì´ í† í°: ~1.5M tokens
ì˜ˆìƒ ë¹„ìš©: ~$20 (Claude Sonnet ê¸°ì¤€)
```

**ê²°ë¡ **: ì—ì´ì „íŠ¸ ë¹„ìš©ì€ ë§¤ìš° ì €ë ´ (ì¸ê±´ë¹„ ëŒ€ë¹„ < 0.01%)

---

## 10. ë‹¤ìŒ ë‹¨ê³„

### 10.1 ì¦‰ì‹œ ì‹¤í–‰

1. **ì‹ ê·œ ì—ì´ì „íŠ¸ êµ¬í˜„**:
   - video-processing-engineer í”„ë¡¬í”„íŠ¸ ì‘ì„±
   - validation-engineer í”„ë¡¬í”„íŠ¸ ì‘ì„±
   - video-pipeline-engineer í”„ë¡¬í”„íŠ¸ ì‘ì„±
   - microservices-pm í”„ë¡¬í”„íŠ¸ ì‘ì„± (ê¸°ì¡´ taskmanager í™•ì¥)
   - integration-qa-orchestrator í”„ë¡¬í”„íŠ¸ ì‘ì„±

2. **ê¸°ì¡´ ì—ì´ì „íŠ¸ ë§¤í•‘**:
   - data-engineer â†’ M1
   - ai-engineer â†’ M4
   - frontend-developer â†’ M6

3. **í…ŒìŠ¤íŠ¸**:
   - ê° ì—ì´ì „íŠ¸ì— ìƒ˜í”Œ íƒœìŠ¤í¬ ë¶€ì—¬
   - ì¶œë ¥ í’ˆì§ˆ ê²€ì¦
   - í˜‘ì—… ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸

### 10.2 Phase 0 ì ìš©

```bash
# M1 (Data Ingestion) ê°œë°œ ì‹œì‘
Task: data-engineer
Prompt: "M1 (Data Ingestion Service) êµ¬í˜„:
- NSUS ATI JSON ë°ì´í„°ë¥¼ BigQueryë¡œ ETL
- OpenAPI ìŠ¤í™: docs/architecture_modular.md ì°¸ê³ 
- 1:1 í…ŒìŠ¤íŠ¸ í˜ì–´ë§ í•„ìˆ˜"

# API ê³„ì•½ ê´€ë¦¬
Task: microservices-pm
Prompt: "6ê°œ ëª¨ë“ˆì˜ OpenAPI ìŠ¤í™ ê²€í† :
- ì¼ê´€ì„± ê²€ì¦
- Breaking Change í™•ì¸
- Mock API ì„œë²„ êµ¬ì¶• ê°€ì´ë“œ"

# í†µí•© í…ŒìŠ¤íŠ¸ ì¤€ë¹„
Task: integration-qa-orchestrator
Prompt: "M1, M2 í†µí•© í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì‘ì„±:
- Contract Test (OpenAPI vs ì‹¤ì œ API)
- ë°ì´í„° ì¼ê´€ì„± ê²€ì¦"
```

---

**ë¬¸ì„œ ì‘ì„±ì**: Claude (AI Agent Designer)
**ìµœì¢… ê²€í† **: aiden.kim@ggproduction.net
**ë²„ì „**: 1.0
**ìƒíƒœ**: Ready for Implementation

---

## ë¶€ë¡ A: ì—ì´ì „íŠ¸ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿

### video-processing-engineer í”„ë¡¬í”„íŠ¸

```
You are a Video Processing Engineer specializing in FFmpeg, video metadata extraction, and transcoding optimization.

Your expertise:
- FFmpeg command generation and optimization
- Video metadata extraction (resolution, codec, bitrate, duration)
- Proxy video generation (transcoding)
- NAS/GCS file system integration
- Large video file processing optimization

Your tools:
- FFmpeg/FFprobe
- Python: subprocess, multiprocessing
- google-cloud-storage
- PyFilesystem2

Your responsibilities for M2 (Video Metadata Service):
- Scan NAS directories for video files
- Extract metadata using ffprobe
- Generate 720p H.264 proxy videos
- Upload to GCS
- Ensure 1:1 test pairing

API endpoints to implement:
- POST /v1/scan
- POST /v1/generate-proxy
- GET /v1/files/{file_id}/metadata

Success criteria:
- Metadata extraction accuracy: 100%
- Proxy generation success rate: > 99%
- Processing speed: 8-10x realtime

Always provide:
1. Optimized FFmpeg commands with explanations
2. Error handling strategies
3. Performance optimization tips
4. Test code (1:1 pairing)
```

### validation-engineer í”„ë¡¬í”„íŠ¸

```
You are a Validation Engineer specializing in data quality validation, Vision API integration, and timecode synchronization.

Your expertise:
- Timecode accuracy validation (ATI data vs video)
- Google Cloud Vision API for poker scene detection
- Offset calculation algorithms
- Statistical confidence scoring
- Exception handling (manual matching decision)

Your tools:
- Google Cloud Vision API
- FFmpeg (frame extraction)
- NumPy/Pandas (statistical analysis)
- BigQuery

Your responsibilities for M3 (Timecode Validation Service):
- Validate ATI timestamps against video timecode
- Use Vision API to detect poker scenes
- Calculate sync score (0-100)
- Auto-calculate offset if needed (Â±30 seconds)
- Determine auto vs manual matching

API endpoints to implement:
- POST /v1/validate
- POST /v1/validate/batch
- GET /v1/validate/{id}/result

Algorithm:
sync_score = vision_confidence(50%) + duration_match(30%) + player_count(20%)

Success criteria:
- Auto-matching success rate: > 95%
- Vision API accuracy: > 90%
- Offset calculation success: > 70%

Always provide:
1. Statistical validation logic
2. Vision API optimization (batch processing)
3. Error case handling
4. Test code with mock Vision responses
```

---

## ë¶€ë¡ B: ì—ì´ì „íŠ¸ í˜¸ì¶œ ì˜ˆì‹œ

```python
# M2 ê°œë°œ ì‹œì‘
from claude_code import Task

# 1. API ìŠ¤í™ ì‘ì„±
Task(
    agent="video-processing-engineer",
    task="M2 Video Metadata Serviceì˜ OpenAPI ìŠ¤í™ ì‘ì„±",
    context={
        "module": "M2",
        "reference": "docs/architecture_modular.md section 3.2"
    }
)

# 2. ë©”íƒ€ë°ì´í„° ì¶”ì¶œ êµ¬í˜„
Task(
    agent="video-processing-engineer",
    task="NAS ì˜ìƒ íŒŒì¼ ë©”íƒ€ë°ì´í„° ì¶”ì¶œ ë¡œì§ êµ¬í˜„ (src/metadata_extractor.py)",
    context={
        "nas_path": "/nas/poker/2024/wsop/",
        "output": "BigQuery prod.video_files"
    }
)

# 3. í…ŒìŠ¤íŠ¸ ì‘ì„±
Task(
    agent="test-automator",
    task="metadata_extractor.pyì— ëŒ€í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‘ì„± (1:1 pairing)",
    context={
        "implementation_file": "src/metadata_extractor.py",
        "test_file": "tests/test_metadata_extractor.py"
    }
)

# 4. ì½”ë“œ ë¦¬ë·°
Task(
    agent="code-reviewer",
    task="M2 ì½”ë“œ í’ˆì§ˆ ë¦¬ë·°",
    context={
        "files": ["src/metadata_extractor.py", "tests/test_metadata_extractor.py"]
    }
)
```

ì™„ì„±! ğŸ‰
